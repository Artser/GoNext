# GoNext - Дневник туриста

Мобильное приложение для планирования поездок и ведения дневника путешествий.

## Описание

GoNext — это полностью офлайн приложение, которое позволяет:
- Хранить коллекцию интересных мест для будущих поездок
- Планировать конкретные маршруты поездок с датами
- Превращать план поездки в реальный дневник по мере посещения мест
- Быстро находить следующее место в текущей поездке
- Открывать места на карте и в навигаторе

## Особенности

- ✅ **Полностью офлайн** — работает без интернета
- ✅ **Локальное хранение** — все данные хранятся на устройстве
- ✅ **Без регистрации** — не требует серверной части
- ✅ **React Native Paper** — современный и красивый UI
- ✅ **TypeScript** — типобезопасный код
- ✅ **SQLite** — надежное локальное хранилище данных
- ✅ **Фотографии** — добавление фотографий к местам и посещениям
- ✅ **Карты** — просмотр мест на карте и выбор координат
- ✅ **Навигация** — интеграция с внешними картами и навигаторами

## Технологии

- **Expo SDK 52** — платформа для разработки React Native приложений
- **Expo Router** — файловая маршрутизация
- **React Native Paper** — библиотека компонентов Material Design
- **TypeScript** — типизированный JavaScript
- **SQLite** — локальная база данных
- **Expo Location** — геолокация
- **Expo Image Picker** — выбор фотографий
- **Expo File System** — работа с файлами

## Установка

### Требования

- Node.js 18+ 
- npm или yarn
- Expo CLI (устанавливается автоматически)
- Android Studio (для Android) или Xcode (для iOS)

### Шаги установки

1. Клонируйте репозиторий или скачайте проект

2. Установите зависимости:
```powershell
npm install
```

3. Запустите приложение:
```powershell
npm start
```

4. Выберите платформу:
   - Нажмите `a` для запуска на Android эмуляторе/устройстве
   - Нажмите `i` для запуска на iOS симуляторе/устройстве
   - Нажмите `w` для запуска в веб-браузере

## Использование

### Главный экран

При запуске приложения вы увидите главный экран с:
- Статистикой (количество мест и поездок)
- Информацией о текущей поездке (если есть)
- Навигационными кнопками для доступа к основным разделам

### Режим "Места"

**Список мест:**
- Просмотр всех сохраненных мест
- Фильтрация по статусам (Все, Посетить, Понравилось)
- Поиск мест по названию
- Обновление списка (pull-to-refresh)

**Создание места:**
1. Нажмите кнопку "+" или "Новое место"
2. Заполните название (обязательно)
3. Добавьте описание (опционально)
4. Укажите координаты:
   - Вручную в формате "широта,долгота"
   - Или нажмите "Текущее местоположение"
   - Или нажмите "Выбрать на карте"
5. Отметьте статусы (Хочу посетить, Понравилось)
6. Нажмите "Сохранить место"

**Редактирование места:**
- Откройте место из списка
- Нажмите иконку редактирования
- Внесите изменения
- Сохраните

**Детальная информация о месте:**
- Просмотр всех данных места
- Добавление фотографий
- Открытие на карте
- Открытие в навигаторе
- Изменение статусов
- Удаление места

### Режим "Поездки"

**Список поездок:**
- Просмотр всех поездок
- Текущая поездка выделена
- Отображение прогресса посещения мест
- Сортировка по датам

**Создание поездки:**
1. Нажмите кнопку "+" или "Новая поездка"
2. Заполните название (обязательно)
3. Добавьте описание (опционально)
4. Укажите даты начала и окончания (формат ГГГГ-ММ-ДД)
5. Отметьте "Сделать текущей поездкой" (опционально)
6. Выберите места из коллекции
7. Нажмите "Создать поездку"

**Детальная информация о поездке:**
- Просмотр всех данных поездки
- Упорядоченный список мест в маршруте
- Переключение между видами:
  - **План** — все места с возможностью изменения порядка
  - **Дневник** — только посещенные места с заметками
- Прогресс посещения мест
- Просмотр всех мест на карте

**Управление местами в поездке:**
- Изменение порядка мест (кнопки вверх/вниз)
- Отметка места как посещенного
- Добавление даты посещения
- Добавление заметок
- Добавление фотографий

### Режим "Следующее место"

- Автоматическое определение следующего места из текущей поездки
- Отображение информации о месте
- Расчет расстояния до места (если доступна геолокация)
- Быстрая отметка места как посещенного
- Открытие на карте и в навигаторе

**Обработка случаев:**
- Нет активной поездки — предложение создать поездку
- Все места посещены — поздравление с завершением поездки

### Настройки

- Просмотр статистики данных
- Информация о приложении
- Очистка всех данных (с подтверждением)

## Структура проекта

```
GoNext/
├── app/                    # Экраны приложения (Expo Router)
│   ├── _layout.tsx        # Корневой layout
│   ├── index.tsx          # Главный экран
│   ├── places/            # Экраны режима "Места"
│   │   ├── index.tsx      # Список мест
│   │   ├── [id].tsx       # Детали места
│   │   ├── new.tsx        # Создание места
│   │   ├── edit/          # Редактирование места
│   │   └── map.tsx        # Карта места
│   ├── trips/             # Экраны режима "Поездки"
│   │   ├── index.tsx      # Список поездок
│   │   ├── [id].tsx       # Детали поездки
│   │   ├── new.tsx        # Создание поездки
│   │   ├── edit/          # Редактирование поездки
│   │   ├── place/         # Управление местом в поездке
│   │   └── map.tsx        # Карта поездки
│   ├── next-place.tsx     # Следующее место
│   └── settings.tsx       # Настройки
├── components/             # Переиспользуемые компоненты
│   ├── PhotoGallery.tsx   # Галерея фотографий
│   └── PhotoPicker.tsx    # Выбор фотографий
├── services/               # Бизнес-логика и работа с БД
│   ├── database.ts        # Сервис работы с SQLite
│   ├── placeService.ts    # CRUD операции для мест
│   ├── tripService.ts     # CRUD операции для поездок
│   ├── tripPlaceService.ts # Операции для мест в поездках
│   └── photoService.ts    # Работа с фотографиями
├── types/                  # TypeScript типы и интерфейсы
│   └── index.ts
├── utils/                  # Вспомогательные функции
│   ├── database.ts        # Утилиты для работы с БД
│   ├── validation.ts      # Валидация данных
│   └── errorHandler.ts    # Обработка ошибок
├── constants/             # Константы приложения
│   └── index.ts
├── package.json           # Зависимости проекта
├── tsconfig.json          # Конфигурация TypeScript
├── app.json               # Конфигурация Expo
└── PLAN.md                # План разработки
```

## База данных

Приложение использует SQLite для локального хранения данных. Структура БД:

- **places** — таблица мест
- **trips** — таблица поездок
- **trip_places** — связующая таблица (места в поездках)
- **place_photos** — таблица фотографий

Все данные хранятся локально на устройстве и не передаются на серверы.

## Разрешения

Приложение запрашивает следующие разрешения:

- **Геолокация** — для определения текущего местоположения и расчета расстояний
- **Камера** — для создания фотографий мест
- **Галерея** — для выбора фотографий из галереи

Все разрешения запрашиваются только при необходимости использования соответствующей функции.

## Офлайн режим

Приложение полностью работает в офлайн режиме:
- Все данные хранятся локально
- Карты работают после загрузки тайлов (OpenStreetMap)
- Не требуется интернет для основной функциональности

## Известные ограничения

- Фотографии хранятся локально и не синхронизируются между устройствами
- Нет резервного копирования данных (можно добавить в будущем)
- Карты требуют интернет для первоначальной загрузки тайлов

## Разработка

### Запуск в режиме разработки

```powershell
npm start
```

### Сборка для продакшена

```powershell
# Android
npx expo build:android

# iOS
npx expo build:ios
```

## Лицензия

Приватный проект.

## Автор

Разработано с использованием Expo, React Native и TypeScript.
